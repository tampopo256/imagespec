<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>画像条件便 - ファイル変換サービス</title>
    <meta name="description" content="画像条件便は、画像の比率調整・容量削減・形式変換を簡単に行えるファイル変換サービスです。">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📸</text></svg>">
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-8">
                <div class="main-card">
                    <!-- ヘッダー -->
                    <div class="header">
                        <h1>📸 画像条件便</h1>
                        <p class="subtitle">画像の比率調整・容量削減・形式変換を簡単に</p>
                    </div>

                    <!-- ナビゲーション -->
                    <!-- <nav class="d-flex justify-content-center mb-4">
                        <ul class="nav nav-pills">
                            <li class="nav-item">
                                <a class="nav-link active" href="index.html">📸 変換ツール</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="generator.html">🔗 URL生成</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="expired.html">ℹ️ 期限切れページ</a>
                            </li>
                        </ul>
                    </nav> -->

                    <!-- 条件バナー -->
                    <div id="conditionBanner" class="condition-banner mb-4 d-none">
                        <div id="conditionText" class="fw-semibold"></div>
                    </div>

                    <!-- アップロードエリア -->
                    <div class="upload-area mb-4" id="uploadArea">
                        <div class="upload-icon">📸</div>
                        <div>
                            <h3 class="h4 mb-3">画像をアップロードしてください</h3>
                            <p class="text-muted mb-0">ドラッグ&ドロップまたはクリックして選択</p>
                            <small class="text-muted">対応形式: JPEG, PNG, WebP, GIF, BMP</small>
                        </div>
                        <input type="file" id="fileInput" class="d-none" accept="image/*" aria-label="画像ファイルを選択">
                    </div>

                    <!-- プレビューエリア -->
                    <div id="previewArea" class="d-none">
                        <!-- エラー表示エリア -->
                        <div id="sizeErrorAlert" class="alert alert-warning d-none mb-4" role="alert">
                            <h6 class="alert-heading">⚠️ 画像比率が設定と異なります</h6>
                            <p class="mb-3">現在の画像比率と設定された比率が一致しません。下記から選択してください：</p>
                            <div class="d-grid gap-2 d-md-flex">
                                <button id="autoCropBtn" class="btn btn-primary">✂️ 自動で切り取り</button>
                                <button id="manualCropBtn" class="btn btn-outline-primary">🎯 手動で切り取り</button>
                                <button id="ignoreSizeBtn" class="btn btn-outline-secondary">→ そのまま処理</button>
                            </div>
                        </div>

                        <!-- 手動切り取りエリア -->
                        <div id="cropArea" class="d-none mb-4">
                            <div class="alert alert-info">
                                <h6 class="mb-2"><strong>🎯 手動切り取りモード</strong></h6>
                                <p class="mb-0">青い枠をドラッグして切り取り範囲を調整し、「切り取り実行」ボタンを押してください。</p>
                            </div>
                            <div class="text-center mb-3">
                                <div id="cropContainer" class="crop-container">
                                    <img id="cropImage" class="crop-image" alt="切り取り用画像">
                                    <div id="cropOverlay" class="crop-overlay">
                                        <div class="crop-handle nw"></div>
                                        <div class="crop-handle ne"></div>
                                        <div class="crop-handle sw"></div>
                                        <div class="crop-handle se"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                                <button id="executeCropBtn" class="btn btn-success">✂️ 切り取り実行</button>
                                <button id="cancelCropBtn" class="btn btn-outline-secondary">❌ キャンセル</button>
                            </div>
                        </div>

                        <!-- プレビュー画像 -->
                        <div class="text-center mb-4">
                            <img id="previewImage" class="preview-image" alt="プレビュー画像">
                        </div>
                        
                        <!-- 処理結果情報 -->
                        <div id="infoPanel" class="alert alert-info mb-4"></div>

                        <!-- アクションボタン -->
                        <div class="d-grid gap-2 d-md-flex justify-content-md-center mb-4">
                            <button id="downloadBtn" class="btn btn-primary btn-lg" aria-label="変換した画像をダウンロード">
                                💾 ダウンロード
                            </button>
                            <button id="resetBtn" class="btn btn-success btn-lg" aria-label="リセットして新しい画像を選択">
                                🔄 リセット
                            </button>
                        </div>
                    </div>

                    <!-- 共有セクション -->
                    <!-- <div class="card">
                        <div class="card-body">
                            <div class="text-center">
                                <h5 class="card-title">🔗 現在の設定を共有</h5>
                                <p class="card-text text-muted">このリンクを共有すると、同じ変換設定でツールを使用できます</p>
                                <div class="mb-3">
                                    <textarea id="shareUrl" class="form-control share-url" rows="3" readonly placeholder="共有URLがここに生成されます"></textarea>
                                </div>
                                <button id="copyBtn" class="btn btn-outline-primary" aria-label="共有リンクをコピー">
                                    📋 リンクをコピー
                                </button>
                            </div>
                        </div>
                    </div> -->

                    <!-- 機能説明 -->
                    <!-- <div class="info-grid">
                        <div class="info-item">
                            <h3>📐 比率調整</h3>
                            <p>16:9, 4:3, 1:1, 3:2の比率に自動調整。縦横の向きも選択可能です。</p>
                        </div>
                        <div class="info-item">
                            <h3>🗜️ 容量削減</h3>
                            <p>指定したファイルサイズ以下に自動圧縮。画質を保ちながら容量を削減します。</p>
                        </div>
                        <div class="info-item">
                            <h3>🔄 形式変換</h3>
                            <p>JPEG、PNG、WebPなどの形式に変換。用途に応じて最適な形式を選択できます。</p>
                        </div>
                        <div class="info-item">
                            <h3>✂️ 手動切り取り</h3>
                            <p>自動切り取りだけでなく、手動で範囲を指定した精密な切り取りも可能です。</p>
                        </div>
                    </div> -->

                    <!-- フッター -->
                    <div class="footer">
                        <p class="mt-3">
                            <small class="text-muted">
                                🛡️ プライバシー保護のため、アップロードされた画像はサーバーに保存されません。<br>
                                すべての処理はお使いのブラウザ内で完了します。
                            </small>
                        </p>
                        <p class="text-muted mb-0">
                            <strong>画像条件便</strong> - 画像ファイル変換サービス<br>
                            <small>© 2025 画像条件便. All rights reserved.</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container">
        <div id="toast" class="toast align-items-center border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body" id="toastMessage"></div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="閉じる"></button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="main.js"></script>
</body>
</html>